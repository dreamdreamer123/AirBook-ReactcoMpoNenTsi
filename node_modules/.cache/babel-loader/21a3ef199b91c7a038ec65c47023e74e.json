{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Korisnik\\\\Desktop\\\\airbook-prod\\\\src\\\\Booking.js\",\n    _s = $RefreshSig$();\n\nimport PlaceInput from \"./components/PlaceInput\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { api_endpoint, api_key, api_secret } from \"./Airbook\";\nimport Suggestions from \"./Suggestions\";\nimport apiGetCityList from \"./apiFunctions/apiGetCityList\";\nimport apiFlightOffers from \"./apiFunctions/apiFlightOffers\";\nimport SelectSearch from \"react-select-search\";\nimport LocationBox from \"./LocationBox\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"./styles/react-datepicker-custom.css\";\nimport FlightStatus from \"./FlightStatus\";\nimport Select from \"react-select\";\nimport Offer from \"./Offer\";\nimport PulseLoader from \"react-spinners/PulseLoader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Booking(props) {\n  _s();\n\n  //Value - text in the input\n  const [originValue, setOriginValue] = useState(\"\");\n  const [destValue, setDestValue] = useState(\"\"); //Suggestions - array of objects from api\n\n  const [originSuggestions, setOriginSuggestions] = useState([]);\n  const [destSuggestions, setDestSuggestions] = useState([]); //Selection\n\n  const [originSelection, setOriginSelection] = useState(\"\");\n  const [destSelection, setDestSelection] = useState(\"\");\n  const [departureDate, setDepartureDate] = useState(new Date());\n  const [adults, setAdults] = useState(1);\n  const [flightOffers, setFlightOffers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showLocationBox, setShowLocationBox] = useState(false); //styles for option elements in city selection\n\n  const optionStyle = {\n    display: \"flex\",\n    alignItems: \"left\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    height: \"42px\",\n    fontWeight: \"bold\",\n    fontSize: \"20px\",\n    paddingLeft: \"40px\"\n  };\n  const passengerOptions = [{\n    value: 1,\n    label: \"1\"\n  }, {\n    value: 2,\n    label: \"2\"\n  }, {\n    value: 3,\n    label: \"3\"\n  }, {\n    value: 4,\n    label: \"4\"\n  }, {\n    value: 5,\n    label: \"5\"\n  }, {\n    value: 6,\n    label: \"6\"\n  }, {\n    value: 7,\n    label: \"7\"\n  }, {\n    value: 8,\n    label: \"8\"\n  }, {\n    value: 9,\n    label: \"9\"\n  }];\n  useEffect(() => {\n    getOriginSuggestions();\n  }, [originSuggestions]);\n  useEffect(() => {\n    console.log(flightOffers);\n    console.log(flightOffers.data);\n    setLoading(false);\n  }, [flightOffers]);\n  useEffect(() => {\n    setShowLocationBox(false);\n    setShowLocationBox(true);\n  }, [originSelection, destSelection]);\n\n  function handleOriginSubmit(e) {\n    if (e.key === \"Enter\") {\n      searchCity(originValue);\n      console.log(\"origin value enter\");\n    }\n  }\n\n  function handleDestSubmit(e) {\n    if (e.key === \"Enter\") {\n      searchCity(destValue);\n      console.log(e);\n    }\n  }\n\n  function searchCity(q) {\n    const token = props.getToken();\n\n    if (token == \"\") {\n      return;\n    }\n\n    console.log(token);\n    const options = {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    };\n    const baseURL = api_endpoint + \"/v1/reference-data/locations\";\n    var cityList;\n\n    const getCityList = async () => {\n      try {\n        cityList = await axios.get(baseURL + \"?subType=CITY&keyword=\" + q, options).then( //this notation is necessary to not violate immutability condition\n        res => q == originValue ? setOriginSuggestions([...res.data.data]) : setDestSuggestions([...res.data.data]), error => console.log(error));\n      } catch (e) {\n        console.error(e);\n      }\n    };\n\n    getCityList();\n  }\n\n  const getOriginSuggestions = () => {\n    const listItems = originSuggestions.map(el => /*#__PURE__*/_jsxDEV(\"option\", {\n      value: el.iataCode,\n      style: optionStyle,\n      children: [el.name, \" (\", el.iataCode, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this));\n    return listItems;\n  };\n\n  const getDestSuggestions = () => {\n    const listItems = destSuggestions.map(el => /*#__PURE__*/_jsxDEV(\"option\", {\n      value: el.iataCode,\n      style: optionStyle,\n      children: [el.name, \" (\", el.iataCode, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this));\n    return listItems;\n  };\n\n  const getOriginLocationObj = () => {\n    const origLocationObj = originSuggestions.find(el => el.iataCode == originSelection);\n    return origLocationObj;\n  };\n\n  const getDestLocationObj = () => {\n    const destLocationObj = destSuggestions.find(el => el.iataCode == destSelection);\n    return destLocationObj;\n  };\n\n  function showFlightOffers() {\n    const token = props.getToken();\n    const options = {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    };\n    const baseURL = api_endpoint + \"/v2/shopping/flight-offers\";\n    const departureDateFormatted = departureDate.toISOString().split(\"T\")[0];\n    console.log(departureDateFormatted);\n\n    const getFlightOffers = async () => {\n      await axios.get(baseURL + \"?originLocationCode=\" + originSelection + \"&destinationLocationCode=\" + destSelection + \"&departureDate=\" + departureDateFormatted + \"&adults=\" + adults.toString(), options).then(res => setFlightOffers([...res.data.data]), error => console.log(error));\n    };\n\n    setLoading(true);\n    getFlightOffers();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"booking\",\n    style: {\n      display: \"flex\",\n      height: \"100vw\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      justifyContent: \"left\",\n      backgroundColor: \"#e50\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"29px\",\n        marginBottom: \"29px\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(PlaceInput, {\n        onchange: e => setOriginValue(e.target.value),\n        onenter: e => handleOriginSubmit(e),\n        placeholder: \"Origin\",\n        value: originValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PlaceInput, {\n        onchange: e => setDestValue(e.target.value),\n        onenter: e => handleDestSubmit(e),\n        placeholder: \"Destination\",\n        value: destValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n        selected: departureDate,\n        onChange: date => setDepartureDate(date)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginLeft: \"20px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          placeholder: \"Adults\",\n          options: passengerOptions,\n          onChange: n => setAdults(n.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"stretch\",\n        justifyContent: \"space-between\"\n      },\n      children: [\n      /*#__PURE__*/\n\n      /* {originSuggestions.length > 0 ? ( */\n      _jsxDEV(Suggestions, {\n        getItems: getOriginSuggestions,\n        updateSel: e => setOriginSelection(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }, this) // ) : (\n      //   <></>\n      // )\n      ,\n      /*#__PURE__*/\n\n      /* {destSuggestions.length > 0 ? ( */\n      _jsxDEV(Suggestions, {\n        getItems: getDestSuggestions,\n        updateSel: e => setDestSelection(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }, this) // ) : (\n      //   <></>\n      // )\n      ]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"100vw\",\n          backgroundColor: \"#047\",\n          boxShadow: \"0px 8px 12px -4px #555\",\n          display: \"flex\",\n          flexDirection: \"row\",\n          alignItems: \"center\",\n          justifyContent: \"space-around\"\n        },\n        children: [showLocationBox == true ? /*#__PURE__*/_jsxDEV(LocationBox, {\n          getLocationObj: getOriginLocationObj,\n          alignment: \"left\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: originSuggestions.length > 0 && destSuggestions.length && originSelection != \"\" && destSelection != \"\" ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"view-offers-btn\",\n            onClick: showFlightOffers,\n            children: \"View flight offers\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }, this), showLocationBox == true ? /*#__PURE__*/_jsxDEV(LocationBox, {\n          getLocationObj: getDestLocationObj,\n          alignment: \"right\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(PulseLoader, {\n        color: \"#fd0\",\n        loading: loading,\n        size: 15,\n        margin: 2\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this), flightOffers.length > 0 ? flightOffers.map(el => {\n        return /*#__PURE__*/_jsxDEV(Offer, {\n          el: el\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 20\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Booking, \"GnFubV24FJMu774FFqRNtQjMYiQ=\");\n\n_c = Booking;\nexport default Booking;\n\nvar _c;\n\n$RefreshReg$(_c, \"Booking\");","map":{"version":3,"sources":["C:/Users/Korisnik/Desktop/airbook-prod/src/Booking.js"],"names":["PlaceInput","useEffect","useState","axios","api_endpoint","api_key","api_secret","Suggestions","apiGetCityList","apiFlightOffers","SelectSearch","LocationBox","DatePicker","FlightStatus","Select","Offer","PulseLoader","Booking","props","originValue","setOriginValue","destValue","setDestValue","originSuggestions","setOriginSuggestions","destSuggestions","setDestSuggestions","originSelection","setOriginSelection","destSelection","setDestSelection","departureDate","setDepartureDate","Date","adults","setAdults","flightOffers","setFlightOffers","loading","setLoading","showLocationBox","setShowLocationBox","optionStyle","display","alignItems","flexDirection","justifyContent","height","fontWeight","fontSize","paddingLeft","passengerOptions","value","label","getOriginSuggestions","console","log","data","handleOriginSubmit","e","key","searchCity","handleDestSubmit","q","token","getToken","options","headers","Authorization","baseURL","cityList","getCityList","get","then","res","error","listItems","map","el","iataCode","name","getDestSuggestions","getOriginLocationObj","origLocationObj","find","getDestLocationObj","destLocationObj","showFlightOffers","departureDateFormatted","toISOString","split","getFlightOffers","toString","backgroundColor","marginTop","marginBottom","target","date","marginLeft","n","width","boxShadow","length"],"mappings":"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","sourcesContent":["import PlaceInput from \"./components/PlaceInput\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { api_endpoint, api_key, api_secret } from \"./Airbook\";\nimport Suggestions from \"./Suggestions\";\nimport apiGetCityList from \"./apiFunctions/apiGetCityList\";\nimport apiFlightOffers from \"./apiFunctions/apiFlightOffers\";\nimport SelectSearch from \"react-select-search\";\nimport LocationBox from \"./LocationBox\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"./styles/react-datepicker-custom.css\";\nimport FlightStatus from \"./FlightStatus\";\nimport Select from \"react-select\";\nimport Offer from \"./Offer\";\nimport PulseLoader from \"react-spinners/PulseLoader\";\n\nfunction Booking(props) {\n  //Value - text in the input\n  const [originValue, setOriginValue] = useState(\"\");\n  const [destValue, setDestValue] = useState(\"\");\n  //Suggestions - array of objects from api\n  const [originSuggestions, setOriginSuggestions] = useState([]);\n  const [destSuggestions, setDestSuggestions] = useState([]);\n  //Selection\n  const [originSelection, setOriginSelection] = useState(\"\");\n  const [destSelection, setDestSelection] = useState(\"\");\n  const [departureDate, setDepartureDate] = useState(new Date());\n\n  const [adults, setAdults] = useState(1);\n  const [flightOffers, setFlightOffers] = useState([]);\n\n  const [loading, setLoading] = useState(false);\n  const [showLocationBox, setShowLocationBox] = useState(false);\n\n  //styles for option elements in city selection\n  const optionStyle = {\n    display: \"flex\",\n    alignItems: \"left\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    height: \"42px\",\n    fontWeight: \"bold\",\n    fontSize: \"20px\",\n    paddingLeft: \"40px\",\n  };\n\n  const passengerOptions = [\n    { value: 1, label: \"1\" },\n    { value: 2, label: \"2\" },\n    { value: 3, label: \"3\" },\n    { value: 4, label: \"4\" },\n    { value: 5, label: \"5\" },\n    { value: 6, label: \"6\" },\n    { value: 7, label: \"7\" },\n    { value: 8, label: \"8\" },\n    { value: 9, label: \"9\" },\n  ];\n\n  useEffect(() => {\n    getOriginSuggestions();\n  }, [originSuggestions]);\n\n  useEffect(() => {\n    console.log(flightOffers);\n    console.log(flightOffers.data);\n    setLoading(false);\n  }, [flightOffers]);\n\n  useEffect(() => {\n    setShowLocationBox(false);\n    setShowLocationBox(true);\n  }, [originSelection, destSelection]);\n\n  function handleOriginSubmit(e) {\n    if (e.key === \"Enter\") {\n      searchCity(originValue);\n      console.log(\"origin value enter\");\n    }\n  }\n\n  function handleDestSubmit(e) {\n    if (e.key === \"Enter\") {\n      searchCity(destValue);\n      console.log(e);\n    }\n  }\n\n  function searchCity(q) {\n    const token = props.getToken();\n    if (token == \"\") {\n      return;\n    }\n    console.log(token);\n    const options = {\n      headers: { Authorization: \"Bearer \" + token },\n    };\n    const baseURL = api_endpoint + \"/v1/reference-data/locations\";\n    var cityList;\n    const getCityList = async () => {\n      try {\n        cityList = await axios\n          .get(baseURL + \"?subType=CITY&keyword=\" + q, options)\n          .then(\n            //this notation is necessary to not violate immutability condition\n            (res) =>\n              q == originValue\n                ? setOriginSuggestions([...res.data.data])\n                : setDestSuggestions([...res.data.data]),\n            (error) => console.log(error)\n          );\n      } catch (e) {\n        console.error(e);\n      }\n    };\n    getCityList();\n  }\n\n  const getOriginSuggestions = () => {\n    const listItems = originSuggestions.map((el) => (\n      <option value={el.iataCode} style={optionStyle}>\n        {el.name} ({el.iataCode})\n      </option>\n    ));\n    return listItems;\n  };\n\n  const getDestSuggestions = () => {\n    const listItems = destSuggestions.map((el) => (\n      <option value={el.iataCode} style={optionStyle}>\n        {el.name} ({el.iataCode})\n      </option>\n    ));\n    return listItems;\n  };\n\n  const getOriginLocationObj = () => {\n    const origLocationObj = originSuggestions.find(\n      (el) => el.iataCode == originSelection\n    );\n    return origLocationObj;\n  };\n\n  const getDestLocationObj = () => {\n    const destLocationObj = destSuggestions.find(\n      (el) => el.iataCode == destSelection\n    );\n    return destLocationObj;\n  };\n\n  function showFlightOffers() {\n    const token = props.getToken();\n    const options = {\n      headers: { Authorization: \"Bearer \" + token },\n    };\n    const baseURL = api_endpoint + \"/v2/shopping/flight-offers\";\n    const departureDateFormatted = departureDate.toISOString().split(\"T\")[0];\n    console.log(departureDateFormatted);\n    const getFlightOffers = async () => {\n      await axios\n        .get(\n          baseURL +\n            \"?originLocationCode=\" +\n            originSelection +\n            \"&destinationLocationCode=\" +\n            destSelection +\n            \"&departureDate=\" +\n            departureDateFormatted +\n            \"&adults=\" +\n            adults.toString(),\n          options\n        )\n        .then(\n          (res) => setFlightOffers([...res.data.data]),\n          (error) => console.log(error)\n        );\n    };\n    setLoading(true);\n    getFlightOffers();\n  }\n\n  return (\n    <div\n      className=\"booking\"\n      style={{\n        display: \"flex\",\n        height: \"100vw\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        justifyContent: \"left\",\n        backgroundColor: \"#e50\",\n      }}\n    >\n      <div\n        style={{\n          marginTop: \"29px\",\n          marginBottom: \"29px\",\n          display: \"flex\",\n          flexDirection: \"row\",\n          justifyContent: \"center\",\n        }}\n      >\n        <PlaceInput\n          onchange={(e) => setOriginValue(e.target.value)}\n          onenter={(e) => handleOriginSubmit(e)}\n          placeholder=\"Origin\"\n          value={originValue}\n        />\n        <PlaceInput\n          onchange={(e) => setDestValue(e.target.value)}\n          onenter={(e) => handleDestSubmit(e)}\n          placeholder=\"Destination\"\n          value={destValue}\n        />\n        <DatePicker\n          selected={departureDate}\n          onChange={(date) => setDepartureDate(date)}\n        ></DatePicker>\n        <div style={{ marginLeft: \"20px\" }}>\n          <Select\n            placeholder=\"Adults\"\n            options={passengerOptions}\n            onChange={(n) => setAdults(n.value)}\n          />\n        </div>\n      </div>\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"row\",\n          alignItems: \"stretch\",\n          justifyContent: \"space-between\",\n        }}\n      >\n        {\n          /* {originSuggestions.length > 0 ? ( */\n          <Suggestions\n            getItems={getOriginSuggestions}\n            updateSel={(e) => setOriginSelection(e.target.value)}\n          ></Suggestions>\n          // ) : (\n          //   <></>\n          // )\n        }\n        {\n          /* {destSuggestions.length > 0 ? ( */\n          <Suggestions\n            getItems={getDestSuggestions}\n            updateSel={(e) => setDestSelection(e.target.value)}\n          ></Suggestions>\n          // ) : (\n          //   <></>\n          // )\n        }\n      </div>\n      <div>\n        {/* {originSuggestions.length > 0 &&\n        destSuggestions.length &&\n        originSelection != \"\" &&\n        destSelection != \"\" ? ( */}\n          \n          <div\n            style={{\n              width: \"100vw\",\n              backgroundColor: \"#047\",\n              boxShadow: \"0px 8px 12px -4px #555\",\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"space-around\",\n            }}\n          >\n            {showLocationBox == true ?\n            <LocationBox\n              getLocationObj={getOriginLocationObj}\n              alignment=\"left\"\n            ></LocationBox>:<></>}\n            <div>\n              {originSuggestions.length > 0 &&\n              destSuggestions.length &&\n              originSelection != \"\" &&\n              destSelection != \"\" ? (\n                <button className=\"view-offers-btn\" onClick={showFlightOffers}>\n                  View flight offers\n                </button>\n              ) : (\n                <></>\n              )}\n            </div>\n            {showLocationBox == true ?\n            <LocationBox\n              getLocationObj={getDestLocationObj}\n              alignment=\"right\"\n            ></LocationBox>:<></>}\n          </div>\n        {/* ) : (\n          <></>\n        )} */}\n      </div>\n      {/*Flight Offer results*/}\n      <div>\n        <PulseLoader color={\"#fd0\"} loading={loading} size={15} margin={2} />\n        {flightOffers.length > 0 ? (\n          flightOffers.map((el) => {\n            return <Offer el={el}></Offer>;\n          })\n        ) : (\n          <></>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Booking;\n"]},"metadata":{},"sourceType":"module"}